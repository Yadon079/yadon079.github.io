---
layout: post
date: 2021-06-05 14:00:00
title: "스프링 부트 활용 : 스프링 웹 MVC 2부"
description: "스프링 부트 개념과 활용"
subject: Spring Boot
category: [ spring boot ]
tags: [ spring, boot, MVC, httpmessageconverters ]
use_math: true
comments: true
---

# 스프링 부트 활용

## HttpMessageConverters

&nbsp;&nbsp;&nbsp;<b>HttpMessageConverters</b>는 스프링 프레임워크에서 제공하는 인터페이스고, 스프링 MVC의 일부분이다. HTTP 요청 본문으로 들어오는 것을 객체로 변환하거나, 객체를 HTTP 본문 응답으로 변경할 때 사용한다.  
주로 `@RequestBody`나 `@ResponseBody`와 함께 사용된다. 

&nbsp;&nbsp;&nbsp;어떤 데이터가 요청으로 들어올 때 요청의 본문에 데이터가 들어있고, 그것을 객체로 받고 싶다면 `@RequestBody`를 사용하여 데이터를 객체로 받을 수 있다. 스프링이 알아서 conversion해준다.

```java
    @PostMapping("/user")
    public @ResponseBody User create(@RequestBody User user) {
        return null;
    }
```

이런 경우에 HttpMessageConverter가 사용된다. 이 때 사용하는 HttpMessageConverters는 여러가지가 있고, 그 중에서 어떤 요청을 받았는지 또는 어떤 응답을 보내야 하는지에 따라 사용하는 HttpMessageConverters가 달라진다.

예를 들어 요청이 JSON 요청이고, JSON 본문이 들어왔다고 하자. 요청에는 ContentType이라는 헤더가 있는데, ContentType에 JSON이라고 적혀있고, 본문도 JSON이다. 그러면 JSONMessageConverters가 사용되어서 JSON 메세지를 user라는 객체로 컨버팅 해준다.  
return을 할 때, user라는 객체를 return 할 것이다. http는 문자이기 때문에, 객체 자체를 response로 내보낼 수 없다. 이것을 변환하기 위해 HttpMessageConverters가 사용된다.

컴포지션 타입[^1]일 경우에는 기본적으로 JsonMessageConverters가 사용된다. 일반 String 객체나 int 객체인 경우 int는 toString을 사용해서 문자열로 변환할 수 있기 때문에 StringMessageConverter가 사용된다.

참고로, `@RestController`가 붙어있으면 `@ResponseBody`를 생략할 수 있다.

```java
@RestController
public class UserController {

    @GetMapping("/hello")
    public String hello() {
        return "hello";
    }

    @PostMapping("/user")
    public User create(@RequestBody User user) {
        return null;
    }

}
```

일반 `@Controller`를 사용할 경우에는 `@ResponseBody`를 꼭 넣어줘야한다. 그래야 MessageConverter가 적용이 된다.  
그러지 않는 경우 <b>View Name Resolver</b>, <b>Bean name View Resolver</b>를 사용해서 이름에 해당하는 뷰를 찾으려고 시도하게 될 것이다.

```java
@Controller
public class UserController {

    @GetMapping("/hello")
    public @ResponseBody String hello() {
        return "hello";
    }

    @PostMapping("/user")
    public @ResponseBody User create(@RequestBody User user) {
        return null;
    }

}
```



---
**Reference**
+ [스프링 부트 개념과 활용](https://inf.run/Xny5)
+ [공식 문서](https://docs.spring.io/spring-boot/docs/2.0.3.RELEASE/reference/htmlsingle/)

---
[^1]:객체 안에 여러 개의 프로퍼티를 가질 수 있는 타입